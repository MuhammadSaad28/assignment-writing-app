<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Admin User</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-md mx-auto p-6">
    <div class="bg-white shadow-xl rounded-2xl p-8">
      <h1 class="text-2xl font-bold text-center mb-4">üîß Create Admin User</h1>
      <p class="text-center text-gray-600 mb-6">
        Create an admin user for the Assignment Writing App
      </p>

      <form id="adminForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
          <input type="email" id="email" class="w-full p-3 border rounded-xl" placeholder="admin@example.com" required />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
          <input type="password" id="password" class="w-full p-3 border rounded-xl" placeholder="Enter password" required minlength="6" />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
          <input type="text" id="fullName" class="w-full p-3 border rounded-xl" placeholder="Admin User" required />
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
          <input type="tel" id="phone" class="w-full p-3 border rounded-xl" placeholder="1234567890" required />
        </div>

        <button type="submit"
          class="w-full bg-red-600 text-white py-3 rounded-xl font-bold hover:bg-red-700 transition">
          Create Admin User
        </button>
      </form>

      <p id="msg" class="mt-4 text-center text-sm"></p>
      
      <div class="mt-6 p-4 bg-yellow-50 rounded-lg">
        <h3 class="font-semibold text-yellow-800 mb-2">Default Admin Credentials:</h3>
        <p class="text-sm text-yellow-700">
          <strong>Email:</strong> admin@assignmentpro.com<br>
          <strong>Password:</strong> admin123456
        </p>
      </div>
    </div>
  </div>

  <script>
    // Firebase configuration - Replace with your actual config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    document.getElementById("adminForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const msg = document.getElementById("msg");
      msg.textContent = "Creating admin user... please wait.";

      try {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const fullName = document.getElementById("fullName").value;
        const phone = document.getElementById("phone").value;

        // Create user account
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const user = userCredential.user;

        // Create admin profile
        await db.collection("profiles").doc(user.uid).set({
          full_name: fullName,
          email: email,
          phone: phone,
          role: 'admin',
          is_approved: true,
          total_earnings: 0,
          created_at: new Date().toISOString()
        });

        msg.textContent = "‚úÖ Admin user created successfully! You can now login with these credentials.";
        msg.className = "mt-4 text-center text-sm text-green-600";
        e.target.reset();
      } catch (error) {
        console.error(error);
        msg.textContent = "‚ùå Error: " + error.message;
        msg.className = "mt-4 text-center text-sm text-red-600";
      }
    });
  </script>
</body>
</html>
